@page
@model Intex.Pages.Payment

@{
    Layout = "_Layout";
}

<div class="filler" style="height: 84px;"></div>

<div class="container mt-4">
    <div class="row">
        <!-- Payment Information Form -->
        <div class="col-md-7">
            <h2>Payment Information</h2>
            <br />
            <form  method="post" class="needs-validation" novalidate>
                <!-- Card Information -->
                <div class="form-group">
                    <label for="cardType">Card Issuer</label>
                    <select class="form-control" id="cardType" name="cardType">
                        <option value="">Select Your Card Issuer</option>
                        @if (Model.Cards != null)
                        {
                            @foreach(var card in Model.Cards)
                                                    {
                                                        <option name="cardType" value="@card.card_type_id">@card.description</option>
                            }
                            
                        }
                        
                        
                    </select>
                </div>
                <div class="form-group">
                <label for="bank">Bank</label>
                <select class="form-control" id="bank" name="bank">
                    <option value="">Select Your Bank</option>
                    @if (Model.Banks != null)
                    {
                        foreach (var bank in Model.Banks)
                        {
                            <option name="bank" value="@bank.bank_id">@bank.name</option>
                        }
                    }
                </select>
               
                </div>
                
                <div class="form-group">
                    <label for="cardNumber">Card Number*</label>
                    <input type="text" class="form-control" id="cardNumber" name="cardNumber" required>
                </div>
                <div class="form-group">
                    <label for="expDate">Expiration Date (MM/YY)*</label>
                    <input type="text" class="form-control" id="expDate" name="expDate" required>
                </div>
                <div class="form-group">
                    <label for="cvv">CVV*</label>
                    <input type="text" class="form-control" id="cvv" name="cvv" required>
                </div>
                <div class="col-md-6">
                    <div class="form-check" style="padding-top: 32px;">
                        <!-- Checkbox for toggling billing address fields -->
                        <input type="checkbox" class="form-check-input" id="sameAsShipping" name="sameAsShipping">
                        <label class="form-check-label" for="sameAsShipping">Billing address isn't the same as shipping</label>
                    </div>

                    <!-- Billing Address -->
                    <div class="form-group">
                        <label for="firstName">First Name*</label>
                        <input type="text" class="form-control" id="billingFirstName" name="firstName" required value="@ViewData["FirstName"]">
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name*</label>
                        <input type="text" class="form-control" id="billingLastName" name="lastName" required value="@ViewData["lastName"]">
                    </div>
                    <div class="form-group">
                        <label for="address">Address*</label>
                        <input type="text" class="form-control" id="billingAddress" name="address" required value="@ViewData["address"]">
                    </div>
                    <div class="form-group">
                        <label for="city">City*</label>
                        <input type="text" class="form-control" id="billingCity" name="city" required value="@ViewData["city"]">
                    </div>

                    
                    <div class="col">
                        <label for="state">State*</label>
                        <select class="form-control" id="state" name="state" required>
                            <option value="">Select a State</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                                            
                    </div>
                    <div class="col">
                        <label for="postalCode">Postal Code*</label>
                        <input type="text" class="form-control" id="postalCode" name="postalCode" required value="@ViewData["PostalCode"]">
                    </div>
                </div>
                
                                    
                
                <!-- ... other input fields ... -->

                <button type="submit" class="btn btn-warning btn-block">Continue to Order Review</button>
            </form>
        </div>

        <!-- Cart Summary -->
        <div class="col-md-5">
            <!-- Cart Summary content -->
            <h3>In Your Bag</h3>
            <br />
            <div class="card">
                <div class="card-body">
                    <!-- Card content -->
                    <h4 class="card-title">Edit</h4>
                    <p class="card-text">Subtotal <span class="float-right">@(((decimal?)ViewData["Subtotal"])?.ToString("C") ?? "N/A")</span></p>
                    <p class="card-text">Estimated Shipping <span class="float-right">@(((decimal?)ViewData["EstimatedShipping"])?.ToString("C") ?? "N/A")</span></p>
                    <p class="card-text">Estimated Tax <span class="float-right">@(((decimal?)ViewData["EstimatedTax"])?.ToString("C") ?? "N/A")</span></p>
                    <hr>
                    <h4 class="card-text">Total <span class="float-right">@(((decimal?)ViewData["Total"])?.ToString("C") ?? "N/A")</span></h4>
                    <p class="card-text">Arrives by Wed, Apr 17</p>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        const billingCheckbox = document.getElementById('sameAsShipping');
        const firstName = document.getElementById('billingFirstName');
        const lastName = document.getElementById('billingLastName');
        const address = document.getElementById('billingAddress');
        const city = document.getElementById('billingCity');
        const state = document.getElementById('state'); // Make sure the ID matches with HTML
        const postalCode = document.getElementById('postalCode'); // Make sure the ID matches with HTML

        // Event listener for checkbox click
        billingCheckbox.addEventListener('click', function () {
            if (this.checked) {
                // Clear fields when checkbox is checked
                firstName.value = '';
                lastName.value = '';
                address.value = '';
                city.value = '';
                state.value = ''; // Clear the state dropdown
                postalCode.value = ''; // Clear the postal code field
            } else {
                // Optionally repopulate fields when checkbox is unchecked
                // You can populate these from server-side (Razor syntax) or another JavaScript variable or function
                firstName.value = '@ViewData["FirstName"]';
                lastName.value = '@ViewData["LastName"]';
                address.value = '@ViewData["Address"]';
                city.value = '@ViewData["City"]';
                // For dropdowns, you need to set the correct option as selected based on some condition or value
                // For now, resetting to default placeholder value
                state.selectedIndex = 0; // Resets to the first item in the dropdown
                postalCode.value = '@ViewData["PostalCode"]';
            }
        });
    });
</script>

